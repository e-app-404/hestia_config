# Cross-Repository ADR Mapping Configuration
# See ADR-0030 for detailed specification

repositories:
  ha-config:
    name: "Home Assistant Configuration Repository"
    owner: "e-app-404"
    repo: "ha-config"
    base_url: "https://github.com/e-app-404/ha-config"
    adr_path: "docs/ADR"
    description: "Main Home Assistant configuration and infrastructure ADRs"
    primary_contact: "evert@example.com"
    update_frequency: "monthly"
    priority: "high"  # Changes here may impact multiple repositories
  
  omega-registry:
    name: "Omega Service Registry"
    owner: "e-app-404"
    repo: "omega-registry"
    base_url: "https://github.com/e-app-404/omega-registry"
    adr_path: "docs/ADR"
    description: "Service discovery and registry architectural decisions"
    primary_contact: "evert@example.com"
    update_frequency: "quarterly"
    priority: "medium"

  bb8-addon:
    name: "BB-8 Home Assistant Add-on"
    owner: "e-app-404"
    repo: "ha-bb8-addon"
    base_url: "https://github.com/e-app-404/ha-bb8-addon"
    adr_path: "docs/ADR"
    description: "BB-8 add-on specific architectural decisions (this repository)"
    primary_contact: "evert@example.com"
    update_frequency: "as-needed"
    priority: "medium"

# Shorthand notation for convenient referencing
shorthand:
  "@ha-config": "ha-config"
  "@omega": "omega-registry"
  "@bb8": "bb8-addon"

# Cross-repository alignment policies
alignment_policies:
  workspace_hygiene:
    description: "Common workspace cleanliness and organization standards"
    upstream: "ha-config:ADR-0024"
    downstream:
      - "bb8-addon:ADR-0024"
    local_overrides_allowed: true
    coordination_required: false
    review_frequency: "quarterly"
    criticality: "medium"
  
  dependency_management:
    description: "Python package and runtime dependency standards"
    upstream: "ha-config:ADR-0002"
    downstream:
      - "bb8-addon:ADR-0002"
    local_overrides_allowed: false
    coordination_required: true
    review_frequency: "monthly"
    criticality: "high"

  ci_cd_standards:
    description: "Continuous integration and deployment patterns"
    upstream: "ha-config:ADR-0027"
    downstream:
      - "bb8-addon:ADR-0027"
    local_overrides_allowed: true
    coordination_required: false
    review_frequency: "quarterly"
    criticality: "medium"

# Notification preferences for alignment drift
notifications:
  slack:
    enabled: false
    webhook_url: ""
    channels: ["#architecture"]
  
  email:
    enabled: true
    recipients: ["evert@example.com"]
    frequency: "weekly"  # daily|weekly|monthly
    
  github:
    enabled: true
    create_issues: true
    label: "adr-alignment"
    assignee: "e-app-404"

# Validation settings
validation:
  link_check_frequency: "daily"
  alignment_check_frequency: "weekly"
  broken_link_tolerance: 24  # hours before alerting
  drift_tolerance: 7  # days before alerting on upstream changes
  
  # URLs to exclude from validation (e.g., private repos, work-in-progress)
  exclude_patterns:
    - "https://github.com/*/private-*"
    - "*/draft/*"
    - "*/wip/*"

# Repository-specific configuration overrides
repository_overrides:
  bb8-addon:
    # This repository adopts standards from ha-config but with local adaptations
    inherited_standards:
      - "workspace_hygiene"
      - "dependency_management" 
      - "ci_cd_standards"
    
    # Custom validation rules for this repository
    custom_validation:
      - "addon_structure_compliance"
      - "home_assistant_compatibility"