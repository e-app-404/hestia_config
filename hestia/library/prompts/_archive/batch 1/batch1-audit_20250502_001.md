id: audit_20250502_001
scope: hestia_cli_tools
baseline_reference: hestia_config_manager.py
status: active
author: chief_ai_officer
target_paths:
  - /tools/validation_tools/
  - /tools/charon/
  - /tools/iris/
  - /tools/metis/
  - /tools/zodiac/

objectives:
  - Ensure all CLI tools adopt the modular `Processor` class structure
  - Standardize interface flags via `argparse` with descriptive help strings
  - Detect absence of cooldown enforcement where repeated execution is possible
  - Require structured logging (timestamped, path-aware)
  - Encourage compatibility with Home Assistant `shell_command` and automation
  - Ensure schema awareness for any tool processing YAML or JSON
  - Validate safe operation: backup-before-write, conflict exposure, dry-run options

criteria:
  - ✅ `Processor` class structure present (`class XYZProcessor: def run(self):`)
  - ✅ CLI entrypoint uses `argparse`, not raw `sys.argv`
  - ✅ Logging calls are present with timestamp formatting
  - ✅ Tools writing files must write to `/output/` and create backups if modifying
  - ✅ Any `diff` or change tool must log conflict or delta data
  - ✅ `--exclude` and `--dry-run` flags present where applicable
  - ✅ Cooldown logic present (`cooldown.txt`, timestamp ledger, or equivalent)
  - ✅ `shell_command` compatibility documented or scriptable
  - ⚠️ Legacy tool wrappers must emit deprecation warnings if found

output_format: markdown_table
severity_levels:
  - high: structural or destructive design fault
  - medium: missing feature but tool is safe
  - low: cosmetic or ergonomic deviation

execution_methods:
  - static_code_analysis
  - pattern_match (regex on class/function definitions)
  - docstring parsing
  - CLI help capture (`--help` output if runnable)

report_output:
  - path
  - tool_name
  - checklist: {processor, argparse, logging, cooldown, backups, dry_run, schema_awareness}
  - severity_level
  - recommended_action

assigned_to: Icaria
delivery:
  - daily audit optional via CI
  - live trigger on file change
  - quarterly full sweep

memory_assertion: >
  This specification establishes the standard for CLI tool design and audit in HESTIA. Any tool that diverges must register a documented exemption with rationale and review date.
