You are GitHub Copilot in VS Code. Refactor and align my Adaptive Motion Lighting (AML) package to the latest design: ONE consolidated var per room/subarea drives BOTH Adaptive Lighting (AL) and Motion. Do not ask questions. Apply exactly as specified and output a list of files changed.

## Canonical context
- Root: /config
- Packages: `homeassistant: packages: !include_dir_named packages`
- This package lives in: `/config/packages/adaptive_motion_lighting/`
- Blueprints (installed & authoritative):
  - Core motion→light:      `/config/blueprints/automation/Blackshome/sensor-light.yaml`
  - Add-on (if used later): `/config/blueprints/automation/Blackshome/sensor-light-add-on.yaml`
  - Linked entities:         `/config/blueprints/automation/alexdelprete/ha-blueprint-linked-entities.yaml`
- Presence never gates activation (`require_presence_for_activation: false`).
- Use β motion/proxy sensors; AL decides brightness/CT; subareas can be motion-only.

## Entities (fixed names)
- AL light groups (rooms):
  - Bedroom  → `light.al_adaptive_bedroom_light_group`
  - Desk     → `light.al_adaptive_desk_light_group`
  - Kitchen  → `light.al_adaptive_kitchen_light_group`
  - Ensuite  → `light.group_ensuite_lights`
  - Hall Dn  → `light.group_hallway_lights_downstairs`
  - Hall Up  → `light.group_hallway_lights_upstairs`
- Subarea targets (no AL):
  - Ottoman  → `light.group_ottoman_light`
  - Wardrobe → `light.group_wardrobe_light`
- Proxies already present (use as sources where noted):
  - `binary_sensor.bedroom_ottoman_motion_proxy`
  - `binary_sensor.entrance_motion_proxy`
  - `binary_sensor.hallway_downstairs_motion_recent_beta` (recent-motion helper)

## What to produce/update
1) **`vars_consolidated.yaml`** — exactly one `var.*_aml_config` per room/subarea carrying ALL AML knobs. Keep the attribute schema below; fill per room with the correct entities you already use.
2) **`bypass_alias_sensors.yaml`** — `binary_sensor.motion_bypass_*` that mirror `state_attr('var.*_aml_config','bypass')`.
3) **`bridge_aml_config_to_al.yaml`** — ONE automation that listens to any `var.*_aml_config` state change (and HA start) and syncs:
   - `al_enabled` → `switch.turn_on/off` of `al_main`
   - `sleep`      → `switch.turn_on/off` of `al_sleep`
   - `manual_override_until` → `adaptive_lighting.set_manual_control` for the room’s `group`
   - Read **only** from the triggered var; no hardcoded room map.
4) **`telemetry_last_triggered.yaml`** — stamp `attributes.last_triggered` on the corresponding `var.*_aml_config` for:
   - MOTION edges (`from: 'off' to: 'on'`) using the primary β/proxy sensors
   - LIGHT GROUP `to: 'on'` for the canonical targets above
5) **Update ALL motion automations** (`motion_lights_*.yaml`) to:
   - Point `use_blueprint.path` to `/config/blueprints/automation/Blackshome/sensor-light.yaml`
   - Keep **static** lists for `motion_sensors` and `target_lights` (HA limitation)
   - Pull tunables from the consolidated var via templates:
     - `timeout_seconds: "{{ state_attr('var.<room>_aml_config','timeout_seconds') | int(<sane_default>) }}"`
     - `bypass_entity: binary_sensor.motion_bypass_<room>`
     - `ambient_lux_entity: "{{ state_attr('var.<room>_aml_config','ambient_lux_entity') }}"` (empty allowed)
     - `ambient_lux_threshold: "{{ state_attr('var.<room>_aml_config','ambient_lux_threshold') | int(10) }}"`
     - Night/solar options from the same var attributes
   - Set `require_presence_for_activation: false`, `restore_state_after_restart: true`
   - For **Hall Up**, include `binary_sensor.hallway_downstairs_motion_recent_beta` alongside the upstairs motion.
   - For **Ottoman** and **Wardrobe**, confirm AL keys are not used (motion-only).
6) Do **not** invent blueprint keys. Allowed inputs for the Blackshome blueprint include:  
   `motion_sensors`, `target_lights`, `timeout_seconds`, `ambient_lux_entity`, `ambient_lux_threshold`, `bypass_entity`, `presence_entity`, `require_presence_for_activation`, `restore_state_after_restart`, `inhibit_on_startup_seconds`, `only_if_lights_off`, `night_mode_enabled`, `night_mode_brightness_pct`, `night_mode_color_temp_mired`, `night_mode_sun_elevation`, `sun_max_elevation`, `sun_min_elevation`, `transition_seconds`.  
   (Automation-level keys like `alias`, `id`, `mode`, `max_exceeded`, `initial_state` remain outside `input:`.)

## Consolidated var attribute schema (use for every `var.*_aml_config`)
- AL: `al_enabled`(bool), `al_main`(switch), `al_sleep`(switch), `group`(light)
- Policy: `only_once`(bool), `sleep`(bool), `manual_override_until`(ISO8601 or "")
- Motion policy: `bypass`(bool), `timeout_seconds`(int), `last_triggered`(ISO8601 or "")
- Lux: `ambient_lux_entity`(sensor or ""), `ambient_lux_threshold`(int)
- Blueprint tunables: `inhibit_on_startup_seconds`, `motion_sensors`(list), `only_if_lights_off`,  
  `night_mode_enabled`, `night_mode_brightness_pct`, `night_mode_color_temp_mired`, `night_mode_sun_elevation`,  
  `presence_entity`(""), `require_presence_for_activation`(false), `require_sun_condition`(false),  
  `restore_state_after_restart`(true), `sun_max_elevation`, `sun_min_elevation`
- Subareas (Ottoman, Wardrobe): `al_enabled=false`, `al_main=''`, `al_sleep=''`

## Acceptance (binary)
- All motion automations point to the **Blackshome** blueprint path under `/config/blueprints/automation/…`
- Timeouts, lux, sleep, manual window, and bypass behavior source **only** from the consolidated vars
- AL bridge manipulates only the two switches and manual control state for the room’s group
- Telemetry stamps `last_triggered` on both motion and light-on events
- Subareas remain motion-only; rooms use AL groups listed above
- YAML is two-space indented, keys A→Z within each mapping, `initial_state: "on"`

Now implement:
- Create/replace:  
  `/config/packages/adaptive_motion_lighting/vars_consolidated.yaml`  
  `/config/packages/adaptive_motion_lighting/bypass_alias_sensors.yaml`  
  `/config/packages/adaptive_motion_lighting/bridge_aml_config_to_al.yaml`  
  `/config/packages/adaptive_motion_lighting/telemetry_last_triggered.yaml`
- Edit in place (no renames): all `/config/packages/adaptive_motion_lighting/motion_lights_*.yaml` as per rules above.

Return a changeset list and any diffs Copilot generated.
