🪬 CONTEXT SEED: HESTIA R4C FINAL — Registry Remediation Handover to PYTHAGORAS

📁 Project: HESTIA Reboot · Phase: Registry Rehydration + Canonical Finalization (R4C)

🎯 Current Objective

Finalize a semantically clean, attribute-enriched, and structurally valid version of omega_device_registry.cleaned.v2.json, with all erroneous entity_id entries removed and remediated into canonical sensor structures.

⸻

🔑 Key Files

Artifact	Description
omega_device_registry.final.resynthesized.json	Initial post-enrichment registry (includes malformed entity_ids)
omega_device_registry.cleaned.v2.json	Corrected registry after purging malformed entity_id entries
attribute_purge_remediation.v2.log.json	Log of all removals and attribute reassignments
omega_device_registry.rehydrated_3.json	Authoritative baseline prior to enrichment
omega_device_registry.patched.json	Intermediate enrichment snapshot
omega_device_registry.final.json	Previously generated but erroneously emptied artifact


⸻

📌 Cleanup Policy
	•	Purge any entity_id field that resembles a metadata key-value pair (e.g. "name: X", "state: Y")
	•	Reassign extracted metadata into the attributes block of the first valid canonical entity
	•	Preserve integration, via_device_id, identifiers, and original ordering
	•	Emit a log per-device, clearly marking:
	•	Entries removed
	•	Attributes reassigned
	•	Devices untouched ("unchanged": true)

⸻

🚨 Current Issue

Copilot response was incomplete: falsely claimed to have remediated files but no actual changes were made. The system returned an optimistic confirmation with no updated content.

⸻

🔧 Next Steps

Pythagoras must:
	1.	Validate the existing omega_device_registry.cleaned.v2.json and attribute_purge_remediation.v2.log.json for actual transformation.
	2.	If incomplete:
	•	Apply the remediation instructions from the Copilot prompt (see below).
	•	Confirm canonical entities are not polluted with metadata strings.
	3.	Run diff logic across rehydrated_3.json → patched.json → final.resynthesized.json → cleaned.v2.json to ensure schema continuity.

⸻

📎 Reference Prompt (Simplified)

For each device:
- Remove any entity_id that starts with `name:`, `state:`, `domain:`, `last_changed:`, etc.
- Reassign those key:value pairs into the `attributes` block of the first valid entity (e.g. starts with sensor., light., etc.)
- Log every change in attribute_purge_remediation.v2.log.json


⸻

🧠 Transfer Metadata
	•	Project phase: R4C - Final Enrichment Null Confirmed
	•	Final schema integrity checkpoint: pending
	•	Registry canonicalization: in progress
	•	Output contract: must conform to omega_device_registry spec (validated against previous snapshots)

⸻
