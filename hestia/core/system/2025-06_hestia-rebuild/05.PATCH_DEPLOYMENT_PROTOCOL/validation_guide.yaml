title: Hestia Automation Validation Guide
phase: TEMPLATE_GRAPH_REBUILD + AUTOMATION_REWRITER
generated: '2025-06-08'
test_harness_dir: test_harness/
execution_protocol:
  runner: Home Assistant Script Runner or CI-integrated automation test environment
  step_1: Ensure all mock inputs (input_booleans, sensors) exist and are not in use.
  step_2: Load test scripts from test_harness/ into a test-specific script domain
    (e.g., script.test_*)
  step_3: Manually or via automation, trigger each test in sequence.
  step_4: Monitor for 'persistent_notification.create' service call confirming test
    pass.
  step_5: Log failures via 'logbook.log' or test runner hooks.
interpretation_criteria:
  success: 'Notification ''Test Passed: <logic_id>'' is created.'
  failure: No condition met or automation aborted before action step.
  timing_issues: Validate simulated entity states were correctly staged.
rollback_triggers:
  automatic: Detected missing mock entities or invalid service calls.
  manual: Functional test failure in persistent_notification log.
  rollback_plan: See rollback_strategy.yaml for entity-level restoration.
operator_notes:
  env_recommendation: Run in isolated Home Assistant test container or mock instance.
  state_setup: Pre-stage entity states matching expected_conditions if specified.
  parallelism: Avoid running overlapping test scripts unless behavior is explicitly
    coordinated.
session_reference: hestia_phase_scan_20250608_validation_guide
