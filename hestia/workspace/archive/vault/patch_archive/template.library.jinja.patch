*** Begin Patch
*** Update File: /n/ha/custom_templates/template.library.jinja
@@
-{% macro any_child_active(children, active_states=None, output='on') -%}
-  {%- set active_states = active_states or ['playing','paused','buffering','on'] -%}
-  {%- if children is string -%}
-    {%- set children = [children] -%}
-  {%- endif -%}
-  {%- for c in children -%}
-    {%- if states(c) in active_states -%}
-      {{ output }}
-      {%- return -%}
-    {%- endif -%}
-  {%- endfor -%}
-  {{ 'off' if output == 'on' else 'false' }}
-{%- endmacro %}
+{% macro any_child_active(children, active_states=None, output='on') -%}
+  {%- set active_states = active_states or ['playing','paused','buffering','on'] -%}
+  {%- set children = [children] if (children is string) else children -%}
+  {%- set ns = namespace(found=false) -%}
+  {%- for c in children -%}
+    {%- if states(c) in active_states -%}
+      {%- set ns.found = true -%}
+    {%- endif -%}
+  {%- endfor -%}
+  {{ output if ns.found else ('off' if output == 'on' else 'false') }}
+{%- endmacro %}
*** End Patch
