- sensor:
    - name: "Motion Decay Metadata (Delta)"
      unique_id: "metadata_motion_decay_delta"
      state: active
      attributes:
        description: "Delta-tier motion decay sensors for presence tracking"
        file: /config/hestia/sensors/delta/presence/motion_decay.yaml
        version: "1.0"
        last_updated: "2025-04-26"
        tier: "μ"
        subsystem: "hermes"
        canonical_id: "metadata_motion_decay_delta_μ"
        origin_file: "/config/hestia/config/hermes/templates/hermes_abstraction.yaml"

    # These sensors implement the motion score decay pattern described in ARCHITECTURE_DOCTRINE.yaml
    # under [decay_overflow_001] and [decay_timing_001]

    - name: "Bedroom Motion Decay (Delta)"
      unique_id: "bedroom_motion_decay_delta"
      icon: mdi:motion-sensor-off
      state: >
        {% set decay = namespace(score=states('sensor.bedroom_motion_decay') | float(0)) %}
        {% if is_state('binary_sensor.bedroom_motion_β', 'on') %}
          {% set decay.score = 10 %}  # Reset to max value
        {% else %}
          {% set decay.score = max(decay.score - 0.5, 0) %}  # Decay with floor
        {% endif %}
        {{ decay.score }}
      attributes:
        description: "Bedroom motion score with temporal decay"
        max_value: 10
        decay_rate: 0.5
        canonical_id: "bedroom_motion_decay_δ"
        tier: "δ"
        subsystem: "hermes"
        module: "Presence"
        type: "decay"
        role: "tracker"
        config_filepath: "/config/hestia/sensors/delta/presence/motion_decay.yaml"

    - name: "Living Room Motion Decay (Delta)"
      unique_id: "living_room_motion_decay_delta"
      icon: mdi:motion-sensor-off
      state: >
        {% set decay = namespace(score=states('sensor.living_room_motion_decay') | float(0)) %}
        {% if is_state('binary_sensor.living_room_motion_β', 'on') %}
          {% set decay.score = 10 %}  # Reset to max value
        {% else %}
          {% set decay.score = max(decay.score - 0.5, 0) %}  # Decay with floor
        {% endif %}
        {{ decay.score }}
      attributes:
        description: "Living room motion score with temporal decay"
        max_value: 10
        decay_rate: 0.5
        canonical_id: "living_room_motion_decay_δ"
        tier: "δ"
        subsystem: "hermes"
        module: "Presence"
        type: "decay"
        role: "tracker"
        config_filepath: "/config/hestia/sensors/delta/presence/motion_decay.yaml"

    - name: "Kitchen Motion Decay (Delta)"
      unique_id: "kitchen_motion_decay_delta"
      icon: mdi:motion-sensor-off
      state: >
        {% set decay = namespace(score=states('sensor.kitchen_motion_decay') | float(0)) %}
        {% if is_state('binary_sensor.kitchen_motion_β', 'on') %}
          {% set decay.score = 10 %}  # Reset to max value
        {% else %}
          {% set decay.score = max(decay.score - 0.5, 0) %}  # Decay with floor
        {% endif %}
        {{ decay.score }}
      attributes:
        description: "Kitchen motion score with temporal decay"
        max_value: 10
        decay_rate: 0.5
        canonical_id: "kitchen_motion_decay_δ"
        tier: "δ"
        subsystem: "hermes"
        module: "Presence"
        type: "decay"
        role: "tracker"
        config_filepath: "/config/hestia/sensors/delta/presence/motion_decay.yaml"

    - name: "Ensuite Motion Decay (Delta)"
      unique_id: "ensuite_motion_decay_delta"
      icon: mdi:motion-sensor-off
      state: >
        {% set decay = namespace(score=states('sensor.ensuite_motion_decay') | float(0)) %}
        {% if is_state('binary_sensor.ensuite_motion_β', 'on') %}
          {% set decay.score = 10 %}  # Reset to max value
        {% else %}
          {% set decay.score = max(decay.score - 0.5, 0) %}  # Decay with floor
        {% endif %}
        {{ decay.score }}
      attributes:
        description: "Ensuite motion score with temporal decay"
        max_value: 10
        decay_rate: 0.5
        canonical_id: "ensuite_motion_decay_δ"
        tier: "δ"
        subsystem: "hermes"
        module: "Presence"
        type: "decay"
        role: "tracker"
        config_filepath: "/config/hestia/sensors/delta/presence/motion_decay.yaml"
