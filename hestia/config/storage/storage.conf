# Storage Configuration - Mount Points and Volume Management
# Generated: 2025-10-20 via meta-capture session

storage:
  volumes:
    - name: homeassistant_config
      type: smb_share
      source: "//evertappels@192.168.0.129/config"
      mount_point: "/System/Volumes/Data/homeassistant"
      filesystem: smbfs
      options: "nodev,nosuid,mounted by evertappels"
      size: "235Gi total, 96Gi used, 139Gi available"
      usage_percent: 41
      status: mounted
      mount_method: keychain_auth
    
    - name: synthetic_config_interface
      type: synthetic_symlink
      source: "/System/Volumes/Data/homeassistant"
      target: "/config"
      config_file: "/etc/synthetic.conf"
      mapping: "config\thomeassistant"
      status: active
      purpose: "ADR-0024 canonical public interface"
  
  mount_history:
    - timestamp: "2025-10-20"
      action: "eliminated_duplicate"
      details: "Removed autofs mount at /System/Volumes/Data/n/ha"
      method: "disabled auto_smb direct map in /etc/auto_master"
    
    - timestamp: "2025-10-20"
      action: "quarantined_legacy_maps"
      details: "Moved 00_ha.autofs, ha.autofs to .disabled/"
      location: "/etc/auto_master.d/.disabled/"
  
  backups:
    - source: "/etc/auto_master"
      backup_pattern: "/etc/auto_master.bak.YYYYMMDDHHMMSS"
      purpose: "Safety backup before autofs cleanup"
      retention: "manual cleanup"
  
  notes:
    - "Successfully achieved single mount target per ADR-0024"
    - "No legacy /Volumes/* mountpoints remaining"
    - "Synthetic.conf mapping ensures /config â†’ /System/Volumes/Data/homeassistant"
    - "Mount survives reboot via LaunchAgent automation"