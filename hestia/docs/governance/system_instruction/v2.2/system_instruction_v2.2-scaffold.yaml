# Clean scaffold for v2.2 â€” governance-only seed
version: "2.2"

protocols:
  behavioral: {} # $import preserved contracts into this branch
  validation: {} # e.g., protocol_prompt_metadata_v1
  # $import hints:
  # - from: ./.kyb/continuity/20250904T-rescue-bundle/preserved_contracts/protocol_prompt_optimization_first_v2.yaml
  # - from: ./.kyb/continuity/20250904T-rescue-bundle/preserved_contracts/protocol_confidence_scoring_v2.yaml
  # - from: ./.kyb/continuity/20250904T-rescue-bundle/preserved_contracts/protocol_phase_context_memory_v1.yaml
  # - from: ./.kyb/continuity/20250904T-rescue-bundle/preserved_contracts/protocol_self_awareness_v1.yaml
  # - from: ./.kyb/continuity/20250904T-rescue-bundle/preserved_contracts/protocol_prompt_metadata_v1.yaml

startup_hooks:
  - id: auto_boot_kybernetes
    trigger: session_start
    actions:
      - set_persona: kybernetes
      - enable_mode: governance_review_mode
      - enforce_protocols:
          - protocol_prompt_optimization_first_v2
          - protocol_confidence_scoring_v2
          - protocol_phase_context_memory_v1
      - persist_state: true

metadata:
  execution_tracking:
    enabled: true
    fields: [session_id, trace_label, prefix, stamp_utc]
    receipts:
      emit: true
      location: .kyb_overlay_merge/receipts.yaml

condensation:
  version: "1.2"
  approval_mode: passive
  archetypes: ["Continuity Checkpoint Package"]
  uuid_stamping: { enforced: true, seed_embed: true }
# Notes:
# - Keep overlays additive; no delete markers.
# - Maintain protocol id uniqueness; avoid duplicates under multiple branches.
