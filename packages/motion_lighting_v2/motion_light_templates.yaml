template:
  - sensor:
      - name: "Motion Timeout — Bedroom (SQL)"
        unique_id: "motion_timeout_bedroom_sql_v15"
        state: >-
          {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
          {% set parsed = raw | from_json if raw else {} %}
          {% set cfg = parsed.get('bedroom', {}) if parsed is mapping else {} %}
          {{ cfg.get('timeout', 120) }}
        attributes:
          bypass: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('bedroom', {}) if parsed is mapping else {} %}
            {{ cfg.get('bypass', false) }}
          last_triggered: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('bedroom', {}) if parsed is mapping else {} %}
            {{ cfg.get('last_triggered', '') }}
          room_id: "bedroom"
          source: "room_database_sql"

      - name: "Motion Timeout — Upstairs (SQL)"
        unique_id: "motion_timeout_upstairs_sql_v15"
        state: >-
          {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
          {% set parsed = raw | from_json if raw else {} %}
          {% set cfg = parsed.get('upstairs', {}) if parsed is mapping else {} %}
          {{ cfg.get('timeout', 180) }}
        attributes:
          bypass: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('upstairs', {}) if parsed is mapping else {} %}
            {{ cfg.get('bypass', false) }}
          last_triggered: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('upstairs', {}) if parsed is mapping else {} %}
            {{ cfg.get('last_triggered', '') }}
          room_id: "upstairs"
          source: "room_database_sql"

      - name: "Motion Timeout — Downstairs (SQL)"
        unique_id: "motion_timeout_downstairs_sql_v15"
        state: >-
          {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
          {% set parsed = raw | from_json if raw else {} %}
          {% set cfg = parsed.get('downstairs', {}) if parsed is mapping else {} %}
          {{ cfg.get('timeout', 180) }}
        attributes:
          bypass: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('downstairs', {}) if parsed is mapping else {} %}
            {{ cfg.get('bypass', false) }}
          last_triggered: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('downstairs', {}) if parsed is mapping else {} %}
            {{ cfg.get('last_triggered', '') }}
          room_id: "downstairs"
          source: "room_database_sql"

      - name: "Motion Timeout — Kitchen (SQL)"
        unique_id: "motion_timeout_kitchen_sql_v15"
        state: >-
          {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
          {% set parsed = raw | from_json if raw else {} %}
          {% set cfg = parsed.get('kitchen', {}) if parsed is mapping else {} %}
          {{ cfg.get('timeout', 300) }}
        attributes:
          bypass: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('kitchen', {}) if parsed is mapping else {} %}
            {{ cfg.get('bypass', false) }}
          last_triggered: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('kitchen', {}) if parsed is mapping else {} %}
            {{ cfg.get('last_triggered', '') }}
          room_id: "kitchen"
          source: "room_database_sql"

      - name: "Motion Timeout — Living Room (SQL)"
        unique_id: "motion_timeout_living_room_sql_v15"
        state: >-
          {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
          {% set parsed = raw | from_json if raw else {} %}
          {% set cfg = parsed.get('living_room', {}) if parsed is mapping else {} %}
          {{ cfg.get('timeout', 240) }}
        attributes:
          bypass: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('living_room', {}) if parsed is mapping else {} %}
            {{ cfg.get('bypass', false) }}
          last_triggered: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('living_room', {}) if parsed is mapping else {} %}
            {{ cfg.get('last_triggered', '') }}
          room_id: "living_room"
          source: "room_database_sql"

      - name: "Motion Timeout — Ensuite (SQL)"
        unique_id: "motion_timeout_ensuite_sql_v15"
        state: >-
          {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
          {% set parsed = raw | from_json if raw else {} %}
          {% set cfg = parsed.get('ensuite', {}) if parsed is mapping else {} %}
          {{ cfg.get('timeout', 120) }}
        attributes:
          bypass: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('ensuite', {}) if parsed is mapping else {} %}
            {{ cfg.get('bypass', false) }}
          last_triggered: >-
            {% set raw = state_attr('sensor.room_configs_motion_lighting','payload') %}
            {% set parsed = raw | from_json if raw else {} %}
            {% set cfg = parsed.get('ensuite', {}) if parsed is mapping else {} %}
            {{ cfg.get('last_triggered', '') }}
          room_id: "ensuite"
          source: "room_database_sql"